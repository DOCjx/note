<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>tesk1</title>
	<link href="https://123.207.125.53/svn/mycdn/bootstrap3.3.5/css/bootstrap.css" rel="stylesheet">
	<style type="text/css" media="screen">
		.form-inline{
			width: 500px;
			margin:20px auto;
		}
		button{
			margin-left: 20px;
		}
		input{
			margin-left: 40px;
		}
		#helpBlock{
			margin-left: 70px;
		}
		
	</style>
	<script src="https://123.207.125.53/svn/mycdn/Jquery3.0/jquery-3.0.0.js"></script>
	<script src="https://123.207.125.53/svn/mycdn/bootstrap3.3.5/js/bootstrap.js"></script>
</head>
<body>
	<form class="form-inline" action="#" method="get" accept-charset="gb2312">
		<div class="form-group">
			名称
			<input class="name form-control" type="text">
			<button class="btn btn-primary" onclick="return false;" type="">验证</button>
			<span id="helpBlock" class="help-block">必填，长度4~16个字符！</span>
		</div>
	</form>
	<script type="text/javascript">
		$(()=>{
			$('.btn').click((e)=>{
				var reg =  /([^\x00-\xff])+/;//正则匹配双字节字符
				var name = $.trim($('.name').val());//获取input框的值并去除字符串前后的空格
				var counter = 0;
				var temp = '';

				if( !name.length ){
					action("姓名不能为空！","form-group has-error");
					return;
				}
				for( var i=0;i<name.length;i++ ){
					temp = name[i];
					reg.test(temp)?counter+=2:counter++;
				}
				if( counter>=4&&counter<=16 ){
					action("名称格式正确！","form-group has-success");
				}else{
					action("必填，长度4~16个字符！","form-group has-error");
				}
				
			});
			var action = function(text,selector){
				$('#helpBlock').html(text);
				$('.form-group').removeClass().addClass(selector);
			}
		});
	</script>
</body>
</html>
